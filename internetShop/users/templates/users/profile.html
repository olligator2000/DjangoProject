{% extends 'products/base.html' %}

{% load static %}
{% load humanize %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}?v=3">
<div class="content">
    <div class="profile-wrapper">
        <!-- Левая колонка (меню) -->
        <div class="profile-sidebar">
            <div class="profile-tab active" data-tab="personal-info">Личная информация</div>
            <div class="profile-tab" data-tab="orders">Мои заказы</div>
            <div class="profile-tab" data-tab="favorites">Избранное</div>
        </div>

        <!-- Правая колонка (контент) -->
        <div class="profile-content">
            <!-- Вкладка: Личная информация -->
            <div class="tab-content active" id="personal-info">
                <h2 class="h2-text-1">Личная информация</h2>
                <div class="profile-info-container">
                    <!-- Форма для фото и данных -->
                    <form method="post" enctype="multipart/form-data" id="profileForm">
                        {% csrf_token %}
                        <!-- Фото профиля -->
                        <div class="profile-photo-container">
                            {% if form.instance.image %}
                            <img src="{{ form.instance.image.url }}" alt="Profile Photo" class="profile-photo"
                                 id="profilePhoto">
                            {% else %}
                            <img src="{% static 'images/placeholder.png' %}" alt="Profile Photo" class="profile-photo"
                                 id="profilePhoto">
                            {% endif %}
                            {{ form.image }}
                            <label for="photoUpload" class="save-btn">Выбрать фото</label>
                            {% if not form.instance.image %}
                            <span id="fileName">Файл не выбран</span>
                            {% endif %}
                        </div>

                        <!-- Поля профиля -->
                        <div class="profile-form-container">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="{{ form.first_name.id_for_label }}">Имя</label>
                                    {{ form.first_name }}
                                </div>
                                <div class="form-group">
                                    <label for="{{ form.last_name.id_for_label }}">Фамилия</label>
                                    {{ form.last_name }}
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="{{ form.username.id_for_label }}">Имя пользователя</label>
                                    {{ form.username }}
                                </div>
                                <div class="form-group">
                                    <label for="{{ form.email.id_for_label }}">Эл. почта</label>
                                    {{ form.email }}
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="{{ form.phone.id_for_label }}">Телефон</label>
                                    {{ form.phone }}
                                </div>
                                <div class="form-group"></div>
                            </div>
                            <button type="submit" class="save-btn">Сохранить</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Вкладка: Мои заказы -->
            <div class="tab-content" id="orders">
                <h2 class="h2-text-1">Мои заказы</h2>
                {% include 'users/orders_partial.html' %}
            </div>

            <!-- Вкладка: Избранное -->
            <div class="tab-content" id="favorites">
                <h2 class="h2-text-1">Избранное</h2>
                <div class="tab-content-wrapper">
                    <p>Пока тут ничего нет</p>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="{% static 'js/profile.js' %}"></script>

{% endblock %}